#!/bin/sh
#
#  This material contains proprietary software of Entropic Speech, Inc.   
#  Any reproduction, distribution, or publication without the prior	   
#  written permission of Entropic Speech, Inc. is strictly prohibited.
#  Any public distribution of copies of this work authorized in writing by
#  Entropic Speech, Inc. must bear the notice			
# 								
#    "Copyright (c) 1988 Entropic Speech, Inc. All rights reserved."
# 				
#
# test file for pwr @(#)pwr.test	1.2 3/4/90 ESI

ESPS_VERBOSE=0
export ESPS_VERBOSE

echo "Testing pwr."
echo "Making segment-labeled FEA file."
atosps - test.fea <<aArDvArK
{
01 d
02 6a1a
03 Fri Jun  3 20:16:33 1988 
04 1.59
05 fea_edit
06 3.3
07 5/6/88
53 johnson
08 8
0b b4
0c 2
0d 1
10 seg.fea
12 fea_edit seg.fea spstoa seg.fea - 
13 /usr/edemos/demo/speech.sd
52
0 0 1
source_file CODED 1 0 
 /usr/edemos/demo/speech.sd
segment_start LONG 1 0 
segment_length LONG 1 0 
sd FLOAT 180 1 

@window_type CODED 1 [ WT_NONE WT_RECT WT_HAMMING WT_TRIANG ] WT_RECT 
@nan LONG 1 13421 
@src_sf FLOAT 1 8000 
@frmlen LONG 1 180 
@step LONG 1 190 
@start LONG 1 1 
@record_freq DOUBLE 1 44.4444
@start_time DOUBLE 1 0.0

{
01 d
02 6a1a
03 Fri Jun  3 20:09:13 1988 
04 1.59
05 nframe
06 1.1
07 6/5/88
53 johnson
08 47
0b b4
0c 2
0d 1
10 /usr/edemos/demo/speech.sd
12 hdshrink seg.fea.sav seg.fea frame -PPframe /usr/edemos/demo/speech.sd f.fea copysd -ds speech.sd   Copied from eg.sd, records 2054 to 15474 Converted from speech.sd by spstoa.
13 /usr/edemos/demo/speech.sd
52
0 0 1
source_file CODED 1 0 
 /usr/edemos/demo/speech.sd
segment_start LONG 1 0 
segment_length LONG 1 0 
sd FLOAT 180 1 

@window_type CODED 1 [ WT_NONE WT_RECT WT_HAMMING WT_TRIANG ] WT_RECT 
@nan LONG 1 13421 
@src_sf FLOAT 1 8000 
@frmlen LONG 1 180 
@step LONG 1 190 
@start LONG 1 1 

}
}

#source_file	/usr/edemos/demo/speech.sd 
#segment_start	1 
#segment_length	180 
#sd	-2 -5 -4 2 -4 -4 -2 -2 
	-2 0 2 -4 0 7 -1 1 
	6 5 7 3 0 4 3 4 
	4 3 4 3 3 5 3 -1 
	-1 -3 3 2 1 0 1 0 
	-4 -5 -8 -8 -11 -10 -12 -7 
	-3 -10 -8 -6 -5 7 2 0 
	4 4 6 2 5 9 14 12 
	15 21 16 16 19 16 13 1 
	-6 -4 -13 -6 17 32 -51 -23 
	80 -77 -4 29 -56 -12 -3 -23 
	-6 -9 -8 -6 1 12 4 9 
	6 5 8 1 1 5 1 -1 
	-6 -9 -10 -5 -9 -11 -10 -17 
	-11 -8 -8 -9 -5 -2 4 5 
	2 3 5 13 14 11 15 15 
	16 21 14 14 11 14 10 6 
	6 2 1 -2 -6 -12 -5 -7 
	-14 -9 -11 -13 -12 -7 -9 -8 
	-7 -5 -3 -4 -4 -3 -3 -4 
	-3 -3 -5 -1 1 0 -3 2 
	5 1 3 -1 4 4 -1 -2 
	-2 2 -1 0 

#source_file	/usr/edemos/demo/speech.sd 
#segment_start	191 
#segment_length	180 
#sd	3 -2 -1 1 -1 -5 -13 -12 
	-16 -17 -13 -13 -14 -13 -10 -13 
	-5 -5 -9 -3 3 0 0 1 
	2 8 10 9 13 10 10 14 
	9 12 11 7 11 9 6 7 
	7 3 10 7 -1 0 -3 -4 
	-8 -7 -11 -12 -13 -17 -12 -12 
	-15 -13 -13 -12 -9 -9 -9 -6 
	-7 -4 -5 -4 -1 5 7 11 
	11 12 14 13 13 12 11 8 
	4 3 5 2 0 -3 3 0 
	1 3 -2 1 1 1 2 -1 
	1 1 1 1 2 0 2 -1 
	-4 -3 -6 -2 -5 -4 -3 -3 
	-6 -1 -1 -3 -3 0 -5 -8 
	-5 -7 -7 0 2 2 -2 5 
	2 5 8 1 6 5 6 6 
	1 6 2 1 5 1 -1 1 
	3 0 2 2 -2 -1 -3 0 
	-1 1 1 0 1 2 6 6 
	1 1 1 1 0 4 1 0 
	0 -5 -6 -7 -9 -9 -6 -9 
	-9 -9 -10 -8 

#source_file	/usr/edemos/demo/speech.sd 
#segment_start	381 
#segment_length	180 
#sd	12 12 13 14 13 12 9 9 
	9 7 7 7 4 4 4 2 
	2 -2 -5 -2 -2 -5 -9 -9 
	-7 -12 -15 -16 -16 -18 -18 -13 
	-15 -17 -11 -10 -10 -5 1 1 
	-1 7 8 6 11 13 13 17 
	13 14 16 14 12 9 9 7 
	8 7 0 -2 -2 -2 -7 -7 
	-3 -10 -6 -2 -4 -8 -11 -7 
	-3 -6 -5 -3 -4 -5 -5 -4 
	-4 -3 -4 -1 -4 -3 -2 -6 
	0 -3 -2 -4 1 3 0 2 
	6 5 9 9 6 9 6 8 
	10 4 4 9 5 2 0 1 
	0 -2 -2 -9 -7 -10 -10 -9 
	-12 -15 -12 -13 -17 -13 -12 -10 
	-10 -5 -1 -1 3 7 9 6 
	5 11 10 12 15 11 14 12 
	12 12 12 13 10 6 7 7 
	2 -3 -4 -7 -11 -12 -13 -15 
	-13 -17 -11 -10 -14 -12 -11 -6 
	-6 0 0 0 5 -2 5 8 
	7 9 8 7 

#source_file	/usr/edemos/demo/speech.sd 
#segment_start	571 
#segment_length	180 
#sd	-4 -4 -6 -5 -9 -5 -5 -2 
	1 -2 2 -2 -1 2 -2 -1 
	3 2 2 3 4 6 10 12 
	29 51 107 255 -31 -234 12 -147 
	-126 -2 -62 -35 -4 -11 69 116 
	88 139 -42 -92 88 69 40 -145 
	-12 -42 -136 -53 -30 -40 44 14 
	18 102 202 -88 -38 17 -116 -52 
	13 -98 35 -28 -48 20 59 -23 
	75 75 56 68 103 26 42 -8 
	-75 -69 -57 -91 -59 -14 -30 -46 
	10 19 17 69 32 29 45 30 
	-8 17 -10 -12 -15 -7 -34 -3 
	-26 -24 -28 -3 -18 17 16 37 
	29 63 16 34 23 15 1 28 
	-8 25 26 -10 -26 -2 -44 -26 
	-30 -40 -40 -22 -54 -46 -62 -76 
	-61 -52 -63 -85 14 120 -313 167 
	-171 -56 -148 -22 -120 -109 -32 -8 
	-20 96 145 148 444 637 734 536 
	721 654 580 360 157 -146 -157 -470 
	-733 -869 -831 -917 -749 -629 -414 -268 
	-22 101 266 373 

#source_file	/usr/edemos/demo/speech.sd 
#segment_start	761 
#segment_length	180 
#sd	-591 -632 -650 -569 -459 -387 -292 -65 
	121 403 589 1139 2313 1884 1238 2470 
	1939 1459 1317 434 -350 39 -1148 -2183 
	-1887 -2147 -2466 -1967 -1983 -1859 -493 -237 
	-239 700 1210 1119 1571 1227 795 1100 
	732 -254 -245 -460 -845 -709 -738 -664 
	1 69 410 736 930 1084 1059 738 
	615 432 -43 -445 -782 -1028 -1184 -1264 
	-1495 -1285 -1051 -917 -707 -387 -299 7 
	257 396 774 1954 2939 1598 1924 3081 
	1867 1890 1224 -31 -145 -80 -2051 -2441 
	-2011 -2673 -2382 -1986 -2145 -1304 227 -166 
	325 1326 1380 1454 1591 706 568 875 
	-213 -880 -704 -1019 -909 -333 -966 -441 
	920 551 749 1302 1082 1196 1284 202 
	36 239 -732 -1211 -1151 -1531 -1532 -1275 
	-1716 -1258 -552 -777 -693 -17 304 626 
	1520 3340 2977 1392 4098 2911 1804 2480 
	308 -247 -204 -1237 -3630 -2323 -2944 -3524 
	-2313 -2424 -1988 -327 652 -152 1507 2003 
	1497 1837 1318 394 498 288 -1337 -1231 
	-1014 -1499 -983 -382 -409 398 1599 1257 
	1598 2180 1627 1339 

#source_file	/usr/edemos/demo/speech.sd 
#segment_start	951 
#segment_length	180 
#sd	-1515 -1072 -499 -579 -504 232 405 460 
	1872 4103 2404 1157 4758 2424 1775 2500 
	-163 -230 -152 -1335 -3822 -2285 -2387 -3518 
	-1890 -2029 -1663 165 945 86 1133 2301 
	1218 1102 961 -135 -134 -237 -1443 -1870 
	-972 -1038 -1171 -220 356 855 1783 2165 
	1745 2140 2100 1128 528 32 -620 -1174 
	-1516 -2045 -2024 -1645 -1732 -1684 -1196 -754 
	-482 -381 -374 -113 114 341 1185 4072 
	3348 183 4504 3737 1557 2721 361 -49 
	-485 -666 -3189 -3737 -2037 -3120 -2730 -2033 
	-1634 -267 701 1030 693 1525 2254 1014 
	571 137 -350 -566 -1094 -1614 -1825 -948 
	-558 -612 121 1132 1693 2008 2400 2121 
	1662 1647 874 -314 -676 -885 -1532 -1948 
	-1793 -1793 -1586 -1311 -1324 -1005 -462 -334 
	-647 -505 -206 -189 310 3381 4667 -34 
	2945 5549 2029 2643 1178 731 -640 -699 
	-1398 -4837 -3021 -2170 -3139 -2834 -2026 -260 
	85 982 1547 690 2071 2142 802 -97 
	-345 -79 -1199 -1561 -1634 -1653 -685 -291 
	-167 365 1650 2285 2010 2409 2053 1454 
	1210 320 -686 -1214 

#source_file	/usr/edemos/demo/speech.sd 
#segment_start	1141 
#segment_length	180 
#sd	-367 -656 -607 -126 -104 1899 5461 1797 
	605 5551 3791 2660 1242 1007 438 -1529 
	-583 -3530 -4578 -2625 -2538 -2653 -3086 -1091 
	628 441 1509 1153 1481 2134 1449 666 
	-847 -501 -369 -1513 -1918 -1931 -1051 -478 
	-280 254 919 2130 2440 2649 2443 1426 
	1502 989 -306 -1261 -1381 -1348 -2070 -2150 
	-1831 -1647 -1397 -1200 -837 -579 -410 -438 
	-528 -263 -272 1922 5696 2126 247 4987 
	4362 3006 865 867 834 -1399 -691 -3027 
	-4549 -3116 -2457 -2129 -3357 -1906 702 695 
	1174 914 1557 2156 1409 1031 -540 -753 
	-273 -969 -1747 -2280 -1168 -288 -460 -2 
	785 1890 2251 2636 2628 1444 1501 1290 
	17 -1204 -1465 -1152 -1960 -2400 -2068 -1778 
	-1584 -1437 -964 -694 -600 -478 -286 11 
	69 2705 5804 1596 997 4912 4269 2872 
	222 1074 645 -1519 -1076 -3153 -4158 -3299 
	-2472 -1944 -3444 -1782 740 795 1075 716 
	1856 2192 1216 1002 -306 -566 -408 -883 
	-1536 -2324 -1202 -261 -536 -218 731 2036 
	2296 2415 2203 1434 1709 1158 -140 -1185 
	-1245 -898 -1933 -2478 

#source_file	/usr/edemos/demo/speech.sd 
#segment_start	1331 
#segment_length	180 
#sd	1705 5540 3394 308 3946 4993 3472 823 
	645 1380 -1069 -1268 -2082 -4011 -3786 -2885 
	-1802 -3157 -3248 78 998 668 576 1525 
	2497 1513 1348 706 -416 -198 -400 -1072 
	-2139 -1922 -550 -664 -860 -149 1112 1953 
	2105 2446 1897 1600 1814 882 -320 -1101 
	-873 -1024 -2219 -2481 -2063 -1753 -1855 -1818 
	-1246 -1018 -773 -252 26 981 4170 4572 
	1174 2683 4880 4236 2000 431 1545 232 
	-1379 -1697 -3273 -3714 -3437 -2722 -2561 -3701 
	-1746 466 617 502 828 2403 2425 1399 
	1407 735 216 -36 -619 -1279 -2065 -1409 
	-749 -1236 -1004 51 1197 1779 1943 1869 
	1901 2136 1576 430 -268 -382 -682 -1534 
	-2250 -2311 -2050 -1976 -2082 -1946 -1427 -1007 
	-613 -177 292 2625 5016 2462 1649 4248 
	4687 3471 897 1170 1504 -587 -1320 -2365 
	-3427 -3405 -3420 -2682 -3482 -3427 -875 61 
	144 299 1309 2705 2058 1611 1653 1085 
	869 161 -524 -1117 -1640 -1116 -1191 -1608 
	-963 -78 882 1400 1142 1519 2105 1927 
	1165 335 336 142 -822 -1507 -1982 -2034 
	-1934 -2129 -2238 -2064 
aArDvArK

echo "Making file for comparison with output."
cat <<aArDvArK >test.asc
File: <stdin>

---Universal Part of Header---
File type: FEA (Feature File)
Number of data records: unknown (input is pipe)
Data is not tagged.
comment text:
 pwr test.fea - 
 new field raw_power added by pwr
Source files: test.fea
There is no reference header.

Record 1: 
raw_power:  174.19444 

Record 2: 
raw_power:  49.833333 

Record 3: 
raw_power:  79.205556 

Record 4: 
raw_power:  45407.85 

Record 5: 
raw_power:  1977574.1 

Record 6: 
raw_power:  3214355.3 

Record 7: 
raw_power:  3976067.5 

Record 8: 
raw_power:  4191338.5 

aArDvArK

echo "Running pwr.  Diff output, if any, should show only small differences."
pwr test.fea - \
	| psps -f raw_power - \
	| egrep -v '^File header date:|^Produced by:|Hostname:path:' \
	| diff - test.asc

echo "Making tagged FEA file."
atosps - test.fea2 << aArDvArK
{
01 d
02 6a1a
03 Fri Jun  3 20:21:01 1988 
04 1.59
05 fea_edit
06 3.3
07 5/6/88
53 johnson
08 8
09 1
0b b4
10 tag.fea
12 fea_edit tag.fea spstoa tag.fea - 
13 /usr/edemos/demo/speech.sd
52
1 0 0
sd FLOAT 180 1 

@window_type CODED 1 [ WT_NONE WT_RECT WT_HAMMING WT_TRIANG ] WT_RECT 
@nan LONG 1 13421 
@src_sf FLOAT 1 8000 
@frmlen LONG 1 180 
@step LONG 1 190 
@start LONG 1 1 

{
01 d
02 6a1a
03 Fri Jun  3 20:09:38 1988 
04 1.59
05 frame
06 1.1
07 6/5/88
53 johnson
08 47
09 1
0b b4
10 /usr/edemos/demo/speech.sd
12 hdshrink tag.fea.sav tag.fea frame -PPframe /usr/edemos/demo/speech.sd f.fea copysd -ds speech.sd   Copied from eg.sd, records 2054 to 15474 Converted from speech.sd by spstoa.
13 /usr/edemos/demo/speech.sd
52
1 0 0
sd FLOAT 180 1 

@window_type CODED 1 [ WT_NONE WT_RECT WT_HAMMING WT_TRIANG ] WT_RECT 
@nan LONG 1 13421 
@src_sf FLOAT 1 8000 
@frmlen LONG 1 180 
@step LONG 1 190 
@start LONG 1 1 

}
}

#Tag 1
#sd	-2 -5 -4 2 -4 -4 -2 -2 
	-2 0 2 -4 0 7 -1 1 
	6 5 7 3 0 4 3 4 
	4 3 4 3 3 5 3 -1 
	-1 -3 3 2 1 0 1 0 
	-4 -5 -8 -8 -11 -10 -12 -7 
	-3 -10 -8 -6 -5 7 2 0 
	4 4 6 2 5 9 14 12 
	15 21 16 16 19 16 13 1 
	-6 -4 -13 -6 17 32 -51 -23 
	80 -77 -4 29 -56 -12 -3 -23 
	-6 -9 -8 -6 1 12 4 9 
	6 5 8 1 1 5 1 -1 
	-6 -9 -10 -5 -9 -11 -10 -17 
	-11 -8 -8 -9 -5 -2 4 5 
	2 3 5 13 14 11 15 15 
	16 21 14 14 11 14 10 6 
	6 2 1 -2 -6 -12 -5 -7 
	-14 -9 -11 -13 -12 -7 -9 -8 
	-7 -5 -3 -4 -4 -3 -3 -4 
	-3 -3 -5 -1 1 0 -3 2 
	5 1 3 -1 4 4 -1 -2 
	-2 2 -1 0 

#Tag 191
#sd	3 -2 -1 1 -1 -5 -13 -12 
	-16 -17 -13 -13 -14 -13 -10 -13 
	-5 -5 -9 -3 3 0 0 1 
	2 8 10 9 13 10 10 14 
	9 12 11 7 11 9 6 7 
	7 3 10 7 -1 0 -3 -4 
	-8 -7 -11 -12 -13 -17 -12 -12 
	-15 -13 -13 -12 -9 -9 -9 -6 
	-7 -4 -5 -4 -1 5 7 11 
	11 12 14 13 13 12 11 8 
	4 3 5 2 0 -3 3 0 
	1 3 -2 1 1 1 2 -1 
	1 1 1 1 2 0 2 -1 
	-4 -3 -6 -2 -5 -4 -3 -3 
	-6 -1 -1 -3 -3 0 -5 -8 
	-5 -7 -7 0 2 2 -2 5 
	2 5 8 1 6 5 6 6 
	1 6 2 1 5 1 -1 1 
	3 0 2 2 -2 -1 -3 0 
	-1 1 1 0 1 2 6 6 
	1 1 1 1 0 4 1 0 
	0 -5 -6 -7 -9 -9 -6 -9 
	-9 -9 -10 -8 

#Tag 381
#sd	12 12 13 14 13 12 9 9 
	9 7 7 7 4 4 4 2 
	2 -2 -5 -2 -2 -5 -9 -9 
	-7 -12 -15 -16 -16 -18 -18 -13 
	-15 -17 -11 -10 -10 -5 1 1 
	-1 7 8 6 11 13 13 17 
	13 14 16 14 12 9 9 7 
	8 7 0 -2 -2 -2 -7 -7 
	-3 -10 -6 -2 -4 -8 -11 -7 
	-3 -6 -5 -3 -4 -5 -5 -4 
	-4 -3 -4 -1 -4 -3 -2 -6 
	0 -3 -2 -4 1 3 0 2 
	6 5 9 9 6 9 6 8 
	10 4 4 9 5 2 0 1 
	0 -2 -2 -9 -7 -10 -10 -9 
	-12 -15 -12 -13 -17 -13 -12 -10 
	-10 -5 -1 -1 3 7 9 6 
	5 11 10 12 15 11 14 12 
	12 12 12 13 10 6 7 7 
	2 -3 -4 -7 -11 -12 -13 -15 
	-13 -17 -11 -10 -14 -12 -11 -6 
	-6 0 0 0 5 -2 5 8 
	7 9 8 7 

#Tag 571
#sd	-4 -4 -6 -5 -9 -5 -5 -2 
	1 -2 2 -2 -1 2 -2 -1 
	3 2 2 3 4 6 10 12 
	29 51 107 255 -31 -234 12 -147 
	-126 -2 -62 -35 -4 -11 69 116 
	88 139 -42 -92 88 69 40 -145 
	-12 -42 -136 -53 -30 -40 44 14 
	18 102 202 -88 -38 17 -116 -52 
	13 -98 35 -28 -48 20 59 -23 
	75 75 56 68 103 26 42 -8 
	-75 -69 -57 -91 -59 -14 -30 -46 
	10 19 17 69 32 29 45 30 
	-8 17 -10 -12 -15 -7 -34 -3 
	-26 -24 -28 -3 -18 17 16 37 
	29 63 16 34 23 15 1 28 
	-8 25 26 -10 -26 -2 -44 -26 
	-30 -40 -40 -22 -54 -46 -62 -76 
	-61 -52 -63 -85 14 120 -313 167 
	-171 -56 -148 -22 -120 -109 -32 -8 
	-20 96 145 148 444 637 734 536 
	721 654 580 360 157 -146 -157 -470 
	-733 -869 -831 -917 -749 -629 -414 -268 
	-22 101 266 373 

#Tag 761
#sd	-591 -632 -650 -569 -459 -387 -292 -65 
	121 403 589 1139 2313 1884 1238 2470 
	1939 1459 1317 434 -350 39 -1148 -2183 
	-1887 -2147 -2466 -1967 -1983 -1859 -493 -237 
	-239 700 1210 1119 1571 1227 795 1100 
	732 -254 -245 -460 -845 -709 -738 -664 
	1 69 410 736 930 1084 1059 738 
	615 432 -43 -445 -782 -1028 -1184 -1264 
	-1495 -1285 -1051 -917 -707 -387 -299 7 
	257 396 774 1954 2939 1598 1924 3081 
	1867 1890 1224 -31 -145 -80 -2051 -2441 
	-2011 -2673 -2382 -1986 -2145 -1304 227 -166 
	325 1326 1380 1454 1591 706 568 875 
	-213 -880 -704 -1019 -909 -333 -966 -441 
	920 551 749 1302 1082 1196 1284 202 
	36 239 -732 -1211 -1151 -1531 -1532 -1275 
	-1716 -1258 -552 -777 -693 -17 304 626 
	1520 3340 2977 1392 4098 2911 1804 2480 
	308 -247 -204 -1237 -3630 -2323 -2944 -3524 
	-2313 -2424 -1988 -327 652 -152 1507 2003 
	1497 1837 1318 394 498 288 -1337 -1231 
	-1014 -1499 -983 -382 -409 398 1599 1257 
	1598 2180 1627 1339 

#Tag 951
#sd	-1515 -1072 -499 -579 -504 232 405 460 
	1872 4103 2404 1157 4758 2424 1775 2500 
	-163 -230 -152 -1335 -3822 -2285 -2387 -3518 
	-1890 -2029 -1663 165 945 86 1133 2301 
	1218 1102 961 -135 -134 -237 -1443 -1870 
	-972 -1038 -1171 -220 356 855 1783 2165 
	1745 2140 2100 1128 528 32 -620 -1174 
	-1516 -2045 -2024 -1645 -1732 -1684 -1196 -754 
	-482 -381 -374 -113 114 341 1185 4072 
	3348 183 4504 3737 1557 2721 361 -49 
	-485 -666 -3189 -3737 -2037 -3120 -2730 -2033 
	-1634 -267 701 1030 693 1525 2254 1014 
	571 137 -350 -566 -1094 -1614 -1825 -948 
	-558 -612 121 1132 1693 2008 2400 2121 
	1662 1647 874 -314 -676 -885 -1532 -1948 
	-1793 -1793 -1586 -1311 -1324 -1005 -462 -334 
	-647 -505 -206 -189 310 3381 4667 -34 
	2945 5549 2029 2643 1178 731 -640 -699 
	-1398 -4837 -3021 -2170 -3139 -2834 -2026 -260 
	85 982 1547 690 2071 2142 802 -97 
	-345 -79 -1199 -1561 -1634 -1653 -685 -291 
	-167 365 1650 2285 2010 2409 2053 1454 
	1210 320 -686 -1214 

#Tag 1141
#sd	-367 -656 -607 -126 -104 1899 5461 1797 
	605 5551 3791 2660 1242 1007 438 -1529 
	-583 -3530 -4578 -2625 -2538 -2653 -3086 -1091 
	628 441 1509 1153 1481 2134 1449 666 
	-847 -501 -369 -1513 -1918 -1931 -1051 -478 
	-280 254 919 2130 2440 2649 2443 1426 
	1502 989 -306 -1261 -1381 -1348 -2070 -2150 
	-1831 -1647 -1397 -1200 -837 -579 -410 -438 
	-528 -263 -272 1922 5696 2126 247 4987 
	4362 3006 865 867 834 -1399 -691 -3027 
	-4549 -3116 -2457 -2129 -3357 -1906 702 695 
	1174 914 1557 2156 1409 1031 -540 -753 
	-273 -969 -1747 -2280 -1168 -288 -460 -2 
	785 1890 2251 2636 2628 1444 1501 1290 
	17 -1204 -1465 -1152 -1960 -2400 -2068 -1778 
	-1584 -1437 -964 -694 -600 -478 -286 11 
	69 2705 5804 1596 997 4912 4269 2872 
	222 1074 645 -1519 -1076 -3153 -4158 -3299 
	-2472 -1944 -3444 -1782 740 795 1075 716 
	1856 2192 1216 1002 -306 -566 -408 -883 
	-1536 -2324 -1202 -261 -536 -218 731 2036 
	2296 2415 2203 1434 1709 1158 -140 -1185 
	-1245 -898 -1933 -2478 

#Tag 1331
#sd	1705 5540 3394 308 3946 4993 3472 823 
	645 1380 -1069 -1268 -2082 -4011 -3786 -2885 
	-1802 -3157 -3248 78 998 668 576 1525 
	2497 1513 1348 706 -416 -198 -400 -1072 
	-2139 -1922 -550 -664 -860 -149 1112 1953 
	2105 2446 1897 1600 1814 882 -320 -1101 
	-873 -1024 -2219 -2481 -2063 -1753 -1855 -1818 
	-1246 -1018 -773 -252 26 981 4170 4572 
	1174 2683 4880 4236 2000 431 1545 232 
	-1379 -1697 -3273 -3714 -3437 -2722 -2561 -3701 
	-1746 466 617 502 828 2403 2425 1399 
	1407 735 216 -36 -619 -1279 -2065 -1409 
	-749 -1236 -1004 51 1197 1779 1943 1869 
	1901 2136 1576 430 -268 -382 -682 -1534 
	-2250 -2311 -2050 -1976 -2082 -1946 -1427 -1007 
	-613 -177 292 2625 5016 2462 1649 4248 
	4687 3471 897 1170 1504 -587 -1320 -2365 
	-3427 -3405 -3420 -2682 -3482 -3427 -875 61 
	144 299 1309 2705 2058 1611 1653 1085 
	869 161 -524 -1117 -1640 -1116 -1191 -1608 
	-963 -78 882 1400 1142 1519 2105 1927 
	1165 335 336 142 -822 -1507 -1982 -2034 
	-1934 -2129 -2238 -2064 
aArDvArK

echo "Making file for comparison with output."
cat <<aArDvArK >test.asc
File: test.pwr

---Universal Part of Header---
File type: FEA (Feature File)
Number of data records: 8
Data is  tagged.
refer file: /usr/edemos/demo/speech.sd
comment text:
 pwr - test.pwr 
 new field raw_power added by pwr
Source files: <stdin>
There is no reference header.

Record 1: 
raw_power:  174.19444 

Record 2: 
raw_power:  49.833333 

Record 3: 
raw_power:  79.205556 

Record 4: 
raw_power:  45407.85 

Record 5: 
raw_power:  1977574.1 

Record 6: 
raw_power:  3214355.3 

Record 7: 
raw_power:  3976067.5 

Record 8: 
raw_power:  4191338.5 

aArDvArK

echo "Running pwr.  Diff output, if any, should show only small differences."
cat test.fea2 | pwr - test.pwr
psps -f raw_power test.pwr \
	| egrep -v '^File header date:|^Produced by:|Hostname:path:' \
	| diff - test.asc


echo "Making file for comparison with output."
cat <<aArDvArK >test.asc
File: test.pwr

---Universal Part of Header---
File type: FEA (Feature File)
Number of data records: 8
Data is  tagged.
refer file: /usr/edemos/demo/speech.sd
comment text:
 pwr -f sd -f log -l - test.pwr 
 new field log added by pwr
Source files: <stdin>
There is no reference header.

Record 1: 
log:  2.2410343 

Record 2: 
log:  1.6975199 

Record 3: 
log:  1.8987556 

Record 4: 
log:  4.6571309 

Record 5: 
log:  6.2961328 

Record 6: 
log:  6.5070939 

Record 7: 
log:  6.5994537 

Record 8: 
log:  6.6223527 

aArDvArK

echo "Running pwr -l.  Diff output, if any, should show only small differences."
cat test.fea2 | pwr -f sd -f log -l - test.pwr
psps -f log test.pwr \
	| egrep -v '^File header date:|^Produced by:|Hostname:path:' \
	| diff - test.asc

echo "testing pwr -l for low numbers; should see log_power around -307.55575"

echo "0 0 0 0 0" | testsd -a- - | frame -l 5 - - | pwr -l - - | psps -H -f log_power -

echo "Done testing pwr."

