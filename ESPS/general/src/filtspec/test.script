#!/bin/sh
#@(#)test.script	3.7	12/13/88 ESI
ESPSCOM=./espscom
export ESPSCOM
echo "TEST Script for filtspec(1-ESPS)"
echo "First make a FILT file"
echo "notch_filt -n60 -b30 -s8000 test.filt"
notch_filt -n60 -b30 -s8000 test.filt
echo " "
echo "Convert to magnitude spectrum"
echo "filtspec -s1 -n129 test.filt - | psps -H - > test.spec"
filtspec -s1 -n129 test.filt - | psps -H - > test.spec
echo " "
echo Compare test.spec with ref.spec
echo diff test.spec ref.spec
echo " "
cat > ref.spec << EOD
Record 1: tag: 0

freq		re_spec_val	im_spec_val
0.000000e+00	0.000000e+00
3.906250e-03	-1.463451e+00
7.812500e-03	-1.915907e+01
1.171875e-02	-6.608476e-01
1.562500e-02	7.831312e-01
1.953125e-02	1.153013e+00
2.343750e-02	1.300203e+00
2.734375e-02	1.374072e+00
3.125000e-02	1.416708e+00
3.515625e-02	1.443706e+00
3.906250e-02	1.461959e+00
4.296875e-02	1.474918e+00
4.687500e-02	1.484470e+00
5.078125e-02	1.491727e+00
5.468750e-02	1.497376e+00
5.859375e-02	1.501865e+00
6.250000e-02	1.505492e+00
6.640625e-02	1.508468e+00
7.031250e-02	1.510940e+00
7.421875e-02	1.513017e+00
7.812500e-02	1.514779e+00
8.203125e-02	1.516288e+00
8.593750e-02	1.517589e+00
8.984375e-02	1.518720e+00
9.375000e-02	1.519709e+00
9.765625e-02	1.520579e+00
1.015625e-01	1.521348e+00
1.054688e-01	1.522032e+00
1.093750e-01	1.522642e+00
1.132813e-01	1.523189e+00
1.171875e-01	1.523682e+00
1.210938e-01	1.524127e+00
1.250000e-01	1.524530e+00
1.289063e-01	1.524896e+00
1.328125e-01	1.525230e+00
1.367188e-01	1.525535e+00
1.406250e-01	1.525815e+00
1.445313e-01	1.526073e+00
1.484375e-01	1.526310e+00
1.523438e-01	1.526528e+00
1.562500e-01	1.526731e+00
1.601563e-01	1.526918e+00
1.640625e-01	1.527092e+00
1.679688e-01	1.527254e+00
1.718750e-01	1.527405e+00
1.757813e-01	1.527546e+00
1.796875e-01	1.527677e+00
1.835938e-01	1.527800e+00
1.875000e-01	1.527915e+00
1.914063e-01	1.528024e+00
1.953125e-01	1.528125e+00
1.992188e-01	1.528221e+00
2.031250e-01	1.528311e+00
2.070313e-01	1.528396e+00
2.109375e-01	1.528476e+00
2.148438e-01	1.528551e+00
2.187500e-01	1.528623e+00
2.226563e-01	1.528691e+00
2.265625e-01	1.528755e+00
2.304688e-01	1.528816e+00
2.343750e-01	1.528873e+00
2.382813e-01	1.528928e+00
2.421875e-01	1.528980e+00
2.460938e-01	1.529029e+00
2.500000e-01	1.529076e+00
2.539063e-01	1.529121e+00
2.578125e-01	1.529164e+00
2.617188e-01	1.529204e+00
2.656250e-01	1.529243e+00
2.695313e-01	1.529280e+00
2.734375e-01	1.529315e+00
2.773438e-01	1.529349e+00
2.812500e-01	1.529381e+00
2.851563e-01	1.529412e+00
2.890625e-01	1.529441e+00
2.929688e-01	1.529469e+00
2.968750e-01	1.529496e+00
3.007813e-01	1.529522e+00
3.046875e-01	1.529547e+00
3.085938e-01	1.529570e+00
3.125000e-01	1.529593e+00
3.164063e-01	1.529615e+00
3.203125e-01	1.529635e+00
3.242188e-01	1.529655e+00
3.281250e-01	1.529674e+00
3.320313e-01	1.529693e+00
3.359375e-01	1.529710e+00
3.398438e-01	1.529727e+00
3.437500e-01	1.529743e+00
3.476563e-01	1.529758e+00
3.515625e-01	1.529773e+00
3.554688e-01	1.529787e+00
3.593750e-01	1.529801e+00
3.632813e-01	1.529814e+00
3.671875e-01	1.529826e+00
3.710938e-01	1.529838e+00
3.750000e-01	1.529849e+00
3.789063e-01	1.529860e+00
3.828125e-01	1.529871e+00
3.867188e-01	1.529880e+00
3.906250e-01	1.529890e+00
3.945313e-01	1.529899e+00
3.984375e-01	1.529907e+00
4.023438e-01	1.529916e+00
4.062500e-01	1.529923e+00
4.101563e-01	1.529931e+00
4.140625e-01	1.529938e+00
4.179688e-01	1.529944e+00
4.218750e-01	1.529951e+00
4.257813e-01	1.529957e+00
4.296875e-01	1.529962e+00
4.335938e-01	1.529967e+00
4.375000e-01	1.529972e+00
4.414063e-01	1.529977e+00
4.453125e-01	1.529981e+00
4.492188e-01	1.529985e+00
4.531250e-01	1.529989e+00
4.570313e-01	1.529992e+00
4.609375e-01	1.529995e+00
4.648438e-01	1.529998e+00
4.687500e-01	1.530000e+00
4.726563e-01	1.530002e+00
4.765625e-01	1.530004e+00
4.804688e-01	1.530006e+00
4.843750e-01	1.530007e+00
4.882813e-01	1.530008e+00
4.921875e-01	1.530009e+00
4.960938e-01	1.530009e+00
5.000000e-01	1.530009e+00
EOD
diff test.spec ref.spec
echo " "
echo There should be no difference on a MASSCOMP;
echo On other machines the differencs should be small
echo  " "
echo To clean up, remove test.filt, test.spec, and ref.spec.
